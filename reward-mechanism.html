<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-project/reward-mechanism">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Reward Mechanism | WeatherXM Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.weatherxm.com/reward-mechanism"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Reward Mechanism | WeatherXM Docs"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.weatherxm.com/reward-mechanism"><link data-rh="true" rel="alternate" href="https://docs.weatherxm.com/reward-mechanism" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.weatherxm.com/reward-mechanism" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E38CY3JRM3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E38CY3JRM3",{})</script>


<script>!function(t,h,e,j,s,n){t.hj=t.hj||function(){(t.hj.q=t.hj.q||[]).push(arguments)},t._hjSettings={hjid:2542811,hjsv:6},s=h.getElementsByTagName("head")[0],(n=h.createElement("script")).async=1,n.src="https://static.hotjar.com/c/hotjar-"+t._hjSettings.hjid+".js?sv="+t._hjSettings.hjsv,s.appendChild(n)}(window,document)</script><link rel="stylesheet" href="/assets/css/styles.e7a68964.css">
<link rel="preload" href="/assets/js/runtime~main.7035718d.js" as="script">
<link rel="preload" href="/assets/js/main.55e0b941.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/wxm-logo-wide-notagline.svg" alt="WeatherXM" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/wxm-logo-wide-notagline-white.svg" alt="WeatherXM" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><a href="https://explorer.weatherxm.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Explorer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/WeatherXM/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://shop.weatherxm.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" id="docs">Shop<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Home</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/project">Project</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/project">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tokenomics">Tokenomics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reward-mechanism">Reward Mechanism</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/project/quality-of-data">Quality of Data (QoD)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/project/proof-of-location">Proof of Location  (PoL)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/project/cell-capacity">Cell Capacity (CC)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/project/hardware-class">Hardware Class</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/wxm-devices/wifi-m5-bundle/wxm-ws1000-introduction">WeatherXM Devices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/wallet/add-edit-wallet-address">Wallet</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/account/delete-account">Account</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/deployment-examples">Deployment Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/glossary">Glossary of Common Terms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/faqs">FAQs</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Project</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Reward Mechanism</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Reward Mechanism</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><div class="theme-admonition theme-admonition-important alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The Reward Mechanism is currently at <strong>version 1.0</strong>. This page serves as both an informational resource about its current status and a glimpse into its future.</p></div></div><p>The Reward Mechanism has undergone a progressive evolution across its versions, each iteration introducing refinements to bolster fairness and transparency in the rewarding process for weather station owners contributing data to the network.</p><ul><li>In its inaugural version (v1.0), the mechanism primarily gauged a station&#x27;s eligibility based on its connection status to the network and the requirement for active wallet ownership, resulting in a somewhat simplistic reward calculation. In this version, the users received in a daily basis the WXM testnet rewards at their wallets.</li><li>The subsequent release, v1.5, marked a significant advancement by expanding the criteria for reward eligibility. This version incorporated additional factors such as the Quality-of-Data (QoD), Proof-of-Location (PoL), Hardware-Classes (HC) and the Cell-Capacity (CP).
These additions contributed to a more sophisticated and equitable system, ensuring that rewards were allocated based on data quality, accurate location proof, and user engagement. </li><li>The third iteration, v2.0, will introduce substantial enhancements, including the incorporation of Business Boost rewards and the implementation of a Merkle Tree structure for transparent reward distribution. The utilization of Merkle Tree will lead users in withdrawing, whenever they choose to do, their rewards from the smart contract.
Business Boost rewards added an additional layer of fairness by incorporating predefined criteria, while the Merkle Tree structure facilitated a verifiable and transparent mechanism for users to validate the distribution of their rewards.
This evolutionary trajectory underscores a commitment to refining the Reward Mechanism, making it more inclusive, nuanced, and transparent to build trust among weather station owners participating in the network.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reward-mechanism-v10">Reward mechanism v1.0<a href="#reward-mechanism-v10" class="hash-link" aria-label="Direct link to Reward mechanism v1.0" title="Direct link to Reward mechanism v1.0">​</a></h2><p>The first iteration of <strong>Reward Mechanism</strong> operates in the following way: only taking into account whether or not a station is connected to the network.</p><p>The reward distribution mechanism has two parts:</p><ul><li><strong>The reward algorithm</strong> which calculates the <code>actual_reward</code> for each weather station by evaluating its weather data for the previous day</li><li>The daily <strong>reward distribution</strong> of rewards to the station owners</li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Important</div><div class="admonitionContent_S0QG"><p>Connecting a wallet is mandatory to receive rewards. If a user has not connected a wallet, the rewards will be lost.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-often-does-the-reward-algorithm-run">How Often does the Reward Algorithm run?<a href="#how-often-does-the-reward-algorithm-run" class="hash-link" aria-label="Direct link to How Often does the Reward Algorithm run?" title="Direct link to How Often does the Reward Algorithm run?">​</a></h3><p>The algorithm runs every day to reward weather stations that were actively sending data to the network for the previous day.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="calculation-of-the-reward-score">Calculation of the Reward Score<a href="#calculation-of-the-reward-score" class="hash-link" aria-label="Direct link to Calculation of the Reward Score" title="Direct link to Calculation of the Reward Score">​</a></h3><p><code>reward_score = array_of_hourly_weather_data / 24</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="explanation">Explanation<a href="#explanation" class="hash-link" aria-label="Direct link to Explanation" title="Direct link to Explanation">​</a></h3><p>In the calculation of the <code>reward_score</code> step, the algorithm takes into account the weather data for each hour of the previous day for any given weather station.</p><ul><li>If the weather station has successfully sent data for each hour of the previous day, then the algorithm&#x27;s input is an array of 24 objects,
with each object being the station&#x27;s weather data.</li><li>If the weather station hasn&#x27;t sent any weather data for 1 or more hours the previous day, then the algorithm&#x27;s input is an array of (<code>24 - X</code>) objects,
with each object being the station&#x27;s weather data and <code>X</code> being the number of hours that the station hasn&#x27;t communicated with our system.</li></ul><p>That input is then being used by dividing its length by 24 (the maximum hours per day) to get a <code>reward_score</code> of <code>0.0</code> to <code>1.0</code>.</p><p>After the calculation of the <code>reward_score</code> step, the algorithm takes the <code>reward_score</code> for any given weather station in our network, multiplies it with the <code>max_daily_reward</code> that the weather
station can get, and the result is the amount of WXM tokens that the algorithm distributes to the user who owns that weather station.</p><p>The formulas which are used to calculate the daily reward per weather station is the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">rewardable_count = Count(all_provisioned_weather_stations)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">max_daily_reward = daily_emission / rewardable_count</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">weather_station_reward = reward_score * max_daily_reward</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reward-distribution-mechanism">Reward Distribution Mechanism<a href="#reward-distribution-mechanism" class="hash-link" aria-label="Direct link to Reward Distribution Mechanism" title="Direct link to Reward Distribution Mechanism">​</a></h3><p>All daily <code>actual_reward</code> per weather station are transferred to the wallet address already set by the user.
This is a bulk transfer operations which happens once in a daily schedule and as a result the users get their daily rewards to their wallets.
Due to blockchain limitations on the number of atomic transfer transactions that may take place with each bulk transfer, as many as needed bulk transfers can be executed for the purpose of everyone getting the daily rewards. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reward-mechanism-v15">Reward mechanism v1.5<a href="#reward-mechanism-v15" class="hash-link" aria-label="Direct link to Reward mechanism v1.5" title="Direct link to Reward mechanism v1.5">​</a></h2><p>This section describes the updated <strong>Reward Mechanism</strong> that will be used to allocate $WXM rewards to station owners for contributing weather data to the network.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Important Notes</div><div class="admonitionContent_S0QG"><ul><li>Connecting a wallet is mandatory to receive rewards. If a user has not connected a wallet, the rewards will be lost.</li><li>Criteria that should be met for a weather station to be rewardable:<ul><li>QoD over qod_threshold</li><li>PoL over pol_threshold</li><li>weather station’s owner should have an active wallet</li></ul></li></ul></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="daily-rewards-calculation-process">Daily Rewards Calculation Process<a href="#daily-rewards-calculation-process" class="hash-link" aria-label="Direct link to Daily Rewards Calculation Process" title="Direct link to Daily Rewards Calculation Process">​</a></h3><p>The Reward Mechanism calculates the amount of tokens that will be distributed to users by completing the following phase:</p><ol><li>Actual Rewards calculation</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-actual-rewards-calculation">1. Actual Rewards calculation<a href="#1-actual-rewards-calculation" class="hash-link" aria-label="Direct link to 1. Actual Rewards calculation" title="Direct link to 1. Actual Rewards calculation">​</a></h4><p>Actual rewards are calculated taking into account the performance of the weather station for the previous day. </p><p>This is a short summary of the criteria used:</p><ul><li><p><strong>Proof-of-Location (PoL)</strong>: An algorithm that evaluates the data about the location of the weather station, its accuracy, consistency, and unison with the location the owner registered on the weather station claiming.
It generates a score that denotes confidence about the weather station&#x27;s location. WeatherXM places great importance on station continuity, necessitating that a station remains stationed at a single location.
When a weather station undergoes relocation, its PoL score reduces to 0 and its seniority in the Cell is reset, aiming to discourage frequent movements and sustain a stable Network. Read more about the <a href="/project/proof-of-location">Proof of Location (PoL) mechanism</a>.</p></li><li><p><strong>Quality-of-Data (QoD)</strong>: An algorithm that evaluates the quality of weather data provided by a weather station. It generates a score that denotes the confidence about the quality of the weather data for each weather station.
WeatherXM values weather stations that produce meaningful and usable data and the QoD score is an attempt to quantify this metric. The end goal is to encourage weather station owners to do their best to comply with WeatherXM&#x27;s
guidelines in order to consistently achieve the best QoD score possible. Read more about the <a href="/project/quality-of-data">Quality of Data (QoD) mechanism</a>.</p></li><li><p><strong>Hardware-Class (HC)</strong>: Each type of approved hardware (weather station) belongs to a specific Hardware Class. Hardware Classes are used to award more tokens to weather stations that have special capabilities,
increased sensor accuracy or range, new sensor types, or other capabilities that make them more valuable to the network. For the time being all Hardware Classes are considered equal. Read more about the <a href="/project/hardware-class">Hardware class</a>.</p></li><li><p><strong>Cell Capacity (CC)</strong>: Each cell has a pre-defined <strong>cell capacity</strong> that depends on its geospatial characteristics. The cell&#x27;s <strong>capacity</strong> is the maximum number of stations that may receive rewards in a specific cell.
If <code>N</code> weather stations are active in a cell with a capacity <code>X</code> during a specific day, with <code>N &gt; X</code>, only the first <code>N</code> stations (ordered first by <strong>reward_score</strong>, then by seniority) will receive rewards. Read more about the <a href="/project/cell-capacity">Cell Capacity (CC)</a>.</p></li></ul><p>We will split the process into 5 distinct steps in an attempt to make everything as clear as possible. </p><p>a. The following variables have known values at the start of each day:</p><ul><li><code>daily_emission</code>: the amount of tokens that are available for allocation on the given day</li><li><code>weight_per_hardware_class</code>: the number denoting how important an HC is compared to all the other HC</li><li><code>pol_threshold</code>: the number denoting the cutoff threshold for PoL: weather stations with <code>pol_score`` &lt; pol_threshold</code> are <strong>excluded</strong> from rewarding</li><li><code>qod_threshold</code>: the number denoting the cutoff threshold for QoD: weather stations with <code>qod_score &lt; qod_threshold</code> are <strong>excluded</strong> from rewarding</li><li><code>capacity</code> per cell: the maximum number of weather stations that will be rewarded in a cell - the rest are <strong>excluded</strong> from rewarding</li></ul><p>b. To calculate the rewardable count of devices per <strong>HC</strong>:</p><ul><li>we exclude weather stations that are owned by users with no wallet address specified</li><li>we count the weather stations with <strong>qod_score</strong> and <strong>pol_score</strong> over the respected specified thresholds, <code>qod_threshold</code>, <code>pol_threshold</code> The number of stations that pass this evaluation are eligible for rewards.</li></ul><p>c. To calculate the <strong>max_reward_per_hardware_class (MRPHC)</strong>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">total_weights = sum(rewardable_count_per_hardware_class[i] * weight_per_hardware_class[i]), i = 1..n, where n = total number of HC</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For every HC:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">tokens_per_hardware_class = daily_emission * (rewardable_count_per_hardware_class * weight_per_hardware_class) / total_weights</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">max_reward_per_hardware_class = tokens_per_hardware_class / rewardable_count_per_hardware_class</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>d. To calculate the <strong>reward_score</strong> and <strong>actual_reward</strong>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">reward_score = pol_score * qod_score</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">actual_reward = reward_score * max_reward_per_hardware_class</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>e. To identify overcrowded cells and decide which of the weather stations will be excluded from rewarding:</p><ul><li>we iterate over available cells and check whether it is overcrowded</li><li>in case it is indeed overcrowded, we sort the neighboring weather stations first by <code>reward_score</code> and then by seniority (<code>claimed_time</code>). Only the <code>N</code> first will be rewarded, where <code>N = capacity</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reward-mechanism-v20">Reward mechanism v2.0<a href="#reward-mechanism-v20" class="hash-link" aria-label="Direct link to Reward mechanism v2.0" title="Direct link to Reward mechanism v2.0">​</a></h2><p>This section describes the updated <strong>Reward Mechanism v1.5</strong> that will be used to allocate $WXM rewards to station owners for contributing weather data to the network.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-flow">High-level flow<a href="#high-level-flow" class="hash-link" aria-label="Direct link to High-level flow" title="Direct link to High-level flow">​</a></h3><p>Every day, the reward algorithm assesses the performance of all weather stations, calculates additional rewards originating from Business Boost use cases, bundles them together with the users&#x27; wallet addresses, and creates a Merkle Tree, the root hash of which is submitted to the RewardPool.</p><p>Users have the option to withdraw their rewards either by accessing the Merkle proof on the WeatherXM Platform or by retrieving the Merkle proof from IPFS and programmatically initiating the procedure. At any given time users have the flexibility to withdraw any amount they desire, provided it does not exceed the total allocated amount.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="daily-rewards-calculation-process-1">Daily Rewards Calculation Process<a href="#daily-rewards-calculation-process-1" class="hash-link" aria-label="Direct link to Daily Rewards Calculation Process" title="Direct link to Daily Rewards Calculation Process">​</a></h3><p>The Reward Mechanism calculates the amount of tokens that will be allocated to users by completing the following phases:</p><ol><li>Base Rewards calculation</li><li>Business Boost Rewards calculation</li><li>Cumulative Rewards calculation</li><li>Merkle Tree creation</li></ol><p>Let&#x27;s take a deep dive into each one of these.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-base-rewards-calculation">1. Base Rewards calculation<a href="#1-base-rewards-calculation" class="hash-link" aria-label="Direct link to 1. Base Rewards calculation" title="Direct link to 1. Base Rewards calculation">​</a></h4><p>Base rewards calculation follows the <strong>Actual Rewards Calculation</strong> already introduced in <strong>Reward Mechanismv1.5</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-business-boost-rewards-calculation">2. Business Boost rewards calculation<a href="#2-business-boost-rewards-calculation" class="hash-link" aria-label="Direct link to 2. Business Boost rewards calculation" title="Direct link to 2. Business Boost rewards calculation">​</a></h4><p>The business boost use cases reward specific devices with a predefined amount of tokens from the Business Development Pool for a period of time. In this phase, all business boost rewards are calculated for each active business boost use case and they are assigned to the eligible devices. The business boost rewards are calculated using the following formula per active business boost use case:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">business_boost_reward = (business_boost_total_rewards / business_boost_duration) / number_of_business_boost_stations</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-cumulative-rewards-calculation">3. Cumulative Rewards Calculation<a href="#3-cumulative-rewards-calculation" class="hash-link" aria-label="Direct link to 3. Cumulative Rewards Calculation" title="Direct link to 3. Cumulative Rewards Calculation">​</a></h4><p>In the third phase of the rewarding mechanism, the cumulative rewards per user are calculated. The cumulative rewards are the sum of all base and business boost rewards that each user&#x27;s weather station  owns.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cumulative_rewards_per_customer = sum(base_reward[i] + business_boost_reward[i]), i = 1..n where n = total number of devices per user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-merkle-tree-creation">4. Merkle Tree Creation<a href="#4-merkle-tree-creation" class="hash-link" aria-label="Direct link to 4. Merkle Tree Creation" title="Direct link to 4. Merkle Tree Creation">​</a></h4><p>In the final phase, the cumulative rewards coupled with the users&#x27; wallet addresses are utilized to create the Merkle tree. The root hash of the Merkle tree is submitted daily in the smart contract to enable $WXM rewards withdrawal by the users.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pseudocode">Pseudocode<a href="#pseudocode" class="hash-link" aria-label="Direct link to Pseudocode" title="Direct link to Pseudocode">​</a></h4><p>To sum up all of the above in pseudocode:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// base reward</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">rewardable = {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;Helium&#x27;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    count: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    weight: 0.9,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    devices: []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;M5&#x27;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    count: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    weight: 1.1,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    devices: []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">for cell in cells:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  cell_devices = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  for device in cell:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if isEmpty(device.owner.wallet):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      device.reward_score = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      device.reward_reason = &#x27;NO_WALLET&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      device.base_reward = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      continue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if qod_score &lt; qod_threshold:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      device.reward_score = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      device.reward_reason = &#x27;QOD_THRESHOLD&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      device.base_reward = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      continue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if pol_score &lt; pol_threshold:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      device.reward_score = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      device.reward_reason = &#x27;POL_THRESHOLD&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      device.base_reward = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      continue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    device.reward_score = reward_algorithm(device.pol_score, device.qod_score)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    cell_devices.push(device)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rewardable[device.hardware_class].count += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rewardable[device.hardware_class].push(device)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  cell_devices.sort( (x, y):  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if x.reward_score == y.reward_score:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      return x.claimedAt - y.claimedAt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return y.reward_score - x.reward_score </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  for (device, i) in cell_devices:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    device.bb_reward = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if i &gt;= cell.capacity:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      device.reward_score = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      device.reward_reason = &#x27;MAX_CAPACITY_REACHED&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      device.base_reward = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">total_weights = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">for key in rewardable.keys:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hc = rewardable[key]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  total_weights += hc.count * hc.weight </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">for key in rewardable.keys:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hc = rewardable[key]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  hc.max_rewards = daily_emission * hc.weight / total_weights </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  for device in hc.devices:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    device.base_reward = device.reward_score * hc.max_rewards</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// business boost</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">for bb in business_boosts:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  for device in bb.devices:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    device.bb_reward += bb.daily_reward</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// cumulative calculation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">for user in users:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  daily_cumulative_rewards = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  for device in user.devices:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    daily_cumulative_rewards = device.bb_reward + device.base_reward</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  if not user.active_wallet:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    continue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  user.wallets[user.active_wallet] = daily_cumulative_rewards</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// merkle tree</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">tree = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">for user in users:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  for wallet in wallets:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    tree.push([wallet, user[wallet].cumulative])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// blockchain tx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">submit(tree.root_hash())</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="withdrawing-rewards">Withdrawing Rewards<a href="#withdrawing-rewards" class="hash-link" aria-label="Direct link to Withdrawing Rewards" title="Direct link to Withdrawing Rewards">​</a></h3><p>Station owners have the freedom to withdraw their rewards at their discretion, without any time restrictions or other limitations.</p><p>Each owner may initiate the withdrawal process by signing a transaction using the private key that corresponds to the blockchain address they have connected to their station. A user-friendly front-end that can be used in conjunction with a wallet like Metamask will be provided, but station owners can also interact programmatically with the <strong>RewardPool</strong> smart contract to withdraw their rewards directly.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="smart-contracts-and-rewarding-mechanism">Smart Contracts and Rewarding Mechanism<a href="#smart-contracts-and-rewarding-mechanism" class="hash-link" aria-label="Direct link to Smart Contracts and Rewarding Mechanism" title="Direct link to Smart Contracts and Rewarding Mechanism">​</a></h3><p>The smart contracts and wallets associated with the rewarding mechanism are the following:</p><ul><li><code>WeatherXM</code>: ERC20 token</li><li><code>RewardPool</code>: smart contract holding users&#x27; allocated $WXM rewards</li><li><code>RewardVault</code>: smart contract holding the total amount of $WXM rewards to be allocated</li><li><code>BusinessDevelopmentPool</code>: wallet holding all $WXM leftovers from daily rewards</li></ul><p>The lifecycle of rewards from the rewarding mechanism to the users&#x27; wallets:</p><ul><li>The <strong>Reward Mechanism</strong> calculates all rewards and allocates them to <strong>RewardPool</strong></li><li>The <strong>RewardPool</strong> holds all allocated rewards</li><li>The <strong>RewardVault</strong> funds the <strong>RewardPool</strong> with the daily emission of $WXM</li><li>The <strong>Business Development Pool</strong> funds daily the <strong>RewardPool</strong> with the business boost of $WXM</li><li>The station owners withdraw their rewards programmatically or through the WeatherXM Platform by interacting with the <strong>RewardPool</strong></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="links">Links<a href="#links" class="hash-link" aria-label="Direct link to Links" title="Direct link to Links">​</a></h2><ul><li><a href="https://www.weatherxm.com/whitepaper" target="_blank" rel="noopener noreferrer">Whitepaper</a></li><li><a href="/project/quality-of-data">Quality of Data (QoD) mechanism</a></li><li><a href="/project/proof-of-location">Proof of Location (PoL) mechanism</a></li><li><a href="/project/cell-capacity">Cell Capacity (CC)</a></li><li><a href="/project/hardware-class">Hardware class</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/WeatherXM/docs/blob/main/docs/project/reward-mechanism.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/tokenomics"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Tokenomics</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/project/quality-of-data"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Quality of Data (QoD)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#reward-mechanism-v10" class="table-of-contents__link toc-highlight">Reward mechanism v1.0</a><ul><li><a href="#how-often-does-the-reward-algorithm-run" class="table-of-contents__link toc-highlight">How Often does the Reward Algorithm run?</a></li><li><a href="#calculation-of-the-reward-score" class="table-of-contents__link toc-highlight">Calculation of the Reward Score</a></li><li><a href="#explanation" class="table-of-contents__link toc-highlight">Explanation</a></li><li><a href="#reward-distribution-mechanism" class="table-of-contents__link toc-highlight">Reward Distribution Mechanism</a></li></ul></li><li><a href="#reward-mechanism-v15" class="table-of-contents__link toc-highlight">Reward mechanism v1.5</a><ul><li><a href="#daily-rewards-calculation-process" class="table-of-contents__link toc-highlight">Daily Rewards Calculation Process</a></li></ul></li><li><a href="#reward-mechanism-v20" class="table-of-contents__link toc-highlight">Reward mechanism v2.0</a><ul><li><a href="#high-level-flow" class="table-of-contents__link toc-highlight">High-level flow</a></li><li><a href="#daily-rewards-calculation-process-1" class="table-of-contents__link toc-highlight">Daily Rewards Calculation Process</a></li><li><a href="#withdrawing-rewards" class="table-of-contents__link toc-highlight">Withdrawing Rewards</a></li><li><a href="#smart-contracts-and-rewarding-mechanism" class="table-of-contents__link toc-highlight">Smart Contracts and Rewarding Mechanism</a></li></ul></li><li><a href="#links" class="table-of-contents__link toc-highlight">Links</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 WeatherXM. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7035718d.js"></script>
<script src="/assets/js/main.55e0b941.js"></script>
</body>
</html>